<div id="response" ng-cloak ng-init="init()" class="device-show">
  <z-wampum-belt main="main"></z-wampum-belt>

<div id="header" class="pure-g">
  <div class="pure-u-2-3 breadcrumbs">
    <div class="content">
    <ul>
      <li><a href="/index.html">Projects</a></li>
      <li ng-repeat="link in main.breadcrumbs">
              /  <a ng-href="#/entity?url={{ link.href | encodeURIComponent }}" class="entity-link">{{ link.text }}</a>
      </li>
    </ul>
    </div>
  </div>
    
  <div class="pure-u-1-3 logo">
    <div class="content">
      <a href="index.html"><img src="images/zetta-logo_sm.png"/></a>
    </div>
  </div>
</div>
  
  
  <!-- Characteristic Title -->
  <div class="characteristic show">
    <div class="content pure-g">
      <div class="characteristicTitle pure-u-1">
          <p class="name" ng-class="">
            <i class="fa fa-home h_277"></i> {{main.properties.raw.name}}
          </p>
          
          <h1>
            <span ng-class="main.stateClass", class="state label">{{main.state}}</span>
          </h1>
      </div>

      <div class="vis pure-u-1">
        <z-dna-strip entity="entity"></z-dna-strip>
        <nvd3-sparkline-chart
          data="stream.data"
          id="{{ stream.name }}"
          x="stream.xFunction()"
          y="stream.yFunction()",
          xTickFormat="stream.xTickFunction"
          rightalignValue="true"
          width="200"
          height="60"
                              >
        <svg></svg>
        </nvd3-sparkline-chart>
        
      </div>

      <div class="actions pure-u-1" ng-show="main.actions.length">
        <div class="pure-g">
          <div ng-repeat="action in main.actions" class="pure-u-1-3">
            <span ng-show="action.title">{{action.title}}</span>
            <span ng-show="!action.title">{{action.name}}</span>
            <form class="form-horizontal">
                <srn-action value="action"></srn-action>

                <div class="control-group">
                  <div class="controls">
                    <button class="pure-button pure-button-primary" ng-click="execute(action)">Submit</button>
                  </div>
                </div>
            </form>
          </div>
        </div>
      </div>
      
      <div id="properties" class="pure-u-1-2">
        <h3>Properties</h3>
        <div ng-bind-html="formattedDiff" class="json"></div>
      </div>
      
      <div id="states" class="pure-u-1-2">
            <h3>State History</h3>
            <span ng-show="!stateLogs.length">State transitions for: </span>
            <span ng-show="stateLogs.length">Latest {{stateLogs.length | pluralize:'transition'}} for: </span>
            {{main.properties.raw.name}}
            <!-- scrollable logs here -->
            <div class="state_log" scroll-glue >
              <ul>
                <li ng-repeat="log in stateLogs" ng-class="{latest: $index==stateLogs.length-1}">
                  <strong>{{ log.transition }}</strong> <span>{{log.time.localTime}} ({{log.time.elapsed}} ms later)</span>
                </li>
              </ul>
            </div>
            <div ng-show="stateLogs.length" class="bottom"></div>
        </div>
      
      
      
      
        <div id="entities" ng-show="main.entities.length">
          <h3>Entities

            <div class="btn-group" id="links">
              <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown">
                Options
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-form" role="menu">
                <li role="presentation" >
                        <label class="checkbox">
                          <input type="checkbox" ng-model="isOneAtATime" id="oneAtATime" />
                          Open only one at a time
                        </label>
                </li>
              </ul>
             </div>
        </h3>
          <accordion close-others="isOneAtATime">
            <accordion-group ng-repeat="entity in main.entities" heading="{{entity.heading}}" is-open="$first">
              <div>
                  <h4>Links</h4>
                    <a class="btn btn-primary" ng-href="#/entity?url={{ entity.selfLink.href | encodeURIComponent }}" class="entity-link {{ entity.selfLink.rel }}">{{ entity.selfLink.rel }}</a>	

                      <div class="btn-group" ng-show="entity.manyLinks">
                            <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown">
                                More Links <span class="caret"></span>
                            </button> 

                            <ul class="dropdown-menu" role="menu">
                                <li ng-repeat="link in entity.links">
                                    <a ng-href="#/entity?url={{ link.href | encodeURIComponent }}"
                                       class="entity-link {{ link.rel }}">{{ link.rel }}</a>
                                </li>
                            </ul> 
                      </div>
              </div>
              <div ng-show="entity.properties.length">
                <h4>Properties</h4>
                <pre>{{entity.properties}}</pre>
              </div>
              <div ng-show="entity.href">
                <button class="btn btn-default btn-primary" ng-click="go(entity.href)">Go</button>
              </div>
            </accordion-group>
          </accordion>
        </div>

    </div>
  </div><!-- /.characteristic -->
  
<ng-include src="'partials/footer.html'"></ng-include>

</div>
