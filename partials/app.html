<div id="response" ng-cloak ng-init="init()" class="device-list">
  <z-wampum-belt main="main"></z-wampum-belt>

  <div id="header" class="pure-g">
    <div class="pure-u-2-3 breadcrumbs">
      <div class="content">
      <ul>
        <li><a href="/index.html">Projects</a></li>
        <li ng-repeat="link in main.breadcrumbs">
                /  <a ng-href="#/entity?url={{ link.href | encodeURIComponent }}" class="entity-link">{{ link.text }}</a>
        </li>
      </ul>
      </div>
    </div>

    <div class="pure-u-1-3 logo">
      <div class="content">
        <a href="index.html"><img src="images/zetta-logo_sm.png"/></a>
      </div>
    </div>
  </div>
  
  <div id="project_map">
  <leaflet defaults="defaults" height="160px" center="center" markers="markers" id="map_{{entity.heading}}"></leaflet>
  </div>
  
  <div id="devices_container">
  <div id="devices" ng-show="main.entities.length" class="pure-g">
    <div class="device pure-u-1-5" ng-repeat="entity in main.entities">
        <!-- Self link for state & actions -->    
        <div class="characteristic self" id="{{entity.heading}}">
            <div class="content">
              <div class="name" ng-class="">
                <i class="fa fa-cog h_277"></i>
                <a ng-href="#/entity?url={{ entity.selfLink.href | encodeURIComponent }}">{{entity.heading}}</a>
              </div>
              <div class="text_location" ng-show="entity.location.placename">
                <i class="fa fa-map-marker"></i> {{entity.location.placename}}
              </div>
              <div class="vis">
                <z-dna-strip entity="entity"></z-dna-strip>
              </div>
              <h1>{{entity.raw.state}}<span class="units"></span> </h1>

            </div><!-- /.content -->
          </div>
            
          <!-- all other characteristic data for device -->
          <div class="characteristic stream {{ stream.name }}" ng-repeat="stream in entity.streams">
            <div class="content">
              
              <div class="name"><i class="fa fa-circle h_{{ stream.data.slice(-1)[0][2] }}" ></i>&nbsp;{{ stream.name | nosub}} 
                
              </div>
              
              <div class="vis">
  
                <sparkline stream="stream"></sparkline>
                <!-- 
                  data="stream.data"
                  id="{{ stream.name }}"
                -->
              </div>
              
              <h1>{{ stream.data.slice(-1)[0][1].toFixed(2) }}<span class="units"></span></h1>

            </div><!-- /.content -->
          </div><!-- characteristic repeater -->
      </div><!-- device repeater -->
    </div>
  </div><!-- devices container -->
  
  </div>  

  <ng-include src="'partials/footer.html'"></ng-include>

</div>

